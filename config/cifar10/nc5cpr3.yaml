# Hyperparameter sweep configuration for CIFAR-10
# Usage: python run.py --config-name=nc5cpr3 -m
#
# This will run all combinations within a single SLURM allocation

defaults:
  - cifar10
  - _self_

# Override logging directory for this sweep
logging:
  log_dir: /home/hli54/scratch/logs/fcil/cifar10/nc5cpr3/gan-cat-label-embed-sweep/

hydra:
  mode: MULTIRUN
  sweep:
    dir: ${logging.log_dir}/${now:%Y-%m-%d}/${now:%H-%M-%S}
    subdir: label-embed-dim-${gan.label_embed_dim}
  sweeper:
    params:
      # federated
      federated.num_clients: 5
      federated.clients_per_round: 3     

      # model 
      model.classification_head_type: multilayer
      model.hidden_dim: 256

      # training
      training.global_rounds: 50
      training.local_epochs: 5
      training.gan_lr: 1e-3
      training.lr: 1e-3

      # gan
      gan.label_embed_dim: 32, 64, 128

      # replay
      replay.ratio: 1.0

      # server
      server.opt_steps: 5
      server.opt_lr: 1e-3